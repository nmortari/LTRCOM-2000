{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"LTRCOM-2000","text":""},{"location":"#from-chaos-to-clarity-ucs-x-series-guide-for-success","title":"From Chaos to Clarity: UCS X-Series Guide for Success","text":""},{"location":"#lab-proctored-by","title":"Lab proctored by:","text":"<ul> <li>David Soper - Technical Marketing Engineer</li> <li>Joost van der Made - Technical Marketing Engineer</li> <li>Nick Mortari - Technical Marketing Engineer</li> </ul>"},{"location":"Automation/ComposeTheWorkflow/","title":"Task 2: Compose The Workflow","text":"<p>Switch to the Designer tab. On the left, under Tools, you can see three subtabs:</p> <ul> <li> <p>Tasks: Contains the list of system and non-system (custom) tasks by category. A task is an atomic action you can perform against a target (i.e. create server profile, deploy new virtual machine, etc.)</p> </li> <li> <p>Workflows: Contains the list of workflows that can be used as tasks (nested workflows) within a larger workflow. In this case, workflow inputs are treated as task inputs and workflow outputs are treated as task outputs</p> </li> <li> <p>Operations: At the moment, Intersight automation offers three special tasks:</p> <ul> <li>Conditional Task: This task allows the creation of multiple branches that can be followed at execution runtime based on configured condition. An example would be taking different path based on a task output or a user choice</li> <li>Parallel Loop: This is a container task, whatever task gets dropped into this task, it will be execute n times in a parallel fashion. Where n is a configurable integer or can be rendered with a configuration template dynamically</li> <li>Serial Loop: This is a container task, tasks within this task will be executed sequentially until a counter expires or a configured condition is met. An example would be: \"execute all tasks serially until the output of this task is \"foo\"</li> </ul> </li> </ul> <p>Move to the Tasks subtab.</p> <p>Search the task New Server Profile from Template and drag it to the canvas as shown below:</p> <p></p> <p>Click the task and note a new panel has opened on the right, as shown below:</p> <p></p> <p>These are the properties of the task. Each task comes with Input, Outputs and can handle (use or manipulate) Variables.</p> <p>Under General, you can set the task name and a description. For this lab, we will leave it as it is.</p> <p>Move to the Inputs tab.</p> <p>You can see a list of inputs, specific for this task. Each input can be mandatory or optional</p> <p></p> <p>This specific task has only one mandatory input, which is Source Profile Template, basically what is the template we will derive a server profile from. Let's go ahead and assign or Map, a value to this input. For the Source Profile Template input, click the Map button.</p> <p>The form defaults to a Static Value type of mapping. However, we generally have three different types of mappings. Let's explore them:</p> <p></p> <ul> <li> <p>Static Value: Assigns a value that will always be honoured at every execution. Based on the input type, you have the possibility to query the Intersight database (like in this case, where you can pull the list of all server profile templates configured for your account), set an arbitrary text string, set a number (Integer), etc.</p> </li> <li> <p>Direct Mapping: Maps the value to either a Workflow Input, another Task output (which has to be positioned in the canvas before the current task), a Workflow Variable or an Environment Variable</p> </li> <li> <p>Advanced Mapping: Is a way for advanced users to write Go template code in order to map values dynamically based on custom code. As mentioned, this is an advanced topic and out of scope for this lab.</p> </li> </ul> <p>For this input, we will go ahead and perform a static mapping. Under Type of Mapping select Static Value.</p> <p>Click on Select Source Profile Template to get the list of the configured profile templates as shown in the picture below.</p> <p>Select your student profile template \u201cSRVxx-ServerProfileTemplate\u201d then click Select in the bottom right corner.</p> <p></p> <p>Click Map in the bottom right corner to confirm.</p> <p>Let's stop for a second and explore the anatomy of a task. You know that each task has inputs, outputs, the possibility to consume variables, a name and a description. Each task has also two exit conditions as you can see in the screenshot below:</p> <p></p> <p>By connecting these green and red dots, you can create paths based on your use case, for instance you can decide to execute a specific task if a previous task fails. Eventually, the workflow either fails or succeeds based on the outcomes of all tasks.</p> <p>Now that we instructed the workflow to create a server profile out of a template, we want to map the created template to a server. In the Tools panel on the left side, search for the task Set Server to Server Profile. As soon as you start dragging the task under the New Server Profile from Template task, a green plus sign will appear. If you release the task over the plus sign, it will automatically be connected to the success line (the green line) of the New Server Profile from Template task as shown below:</p> <p></p> <p>Click on the Auto Align Workflow button to automatically align the tasks:</p> <p></p> <p>Before moving forward with the inputs, let's see how Intersight validates and saves the workflows.</p> <p>Click the Save button in the top right corner. When you Save a workflow, Intersight will perform two actions:</p> <ul> <li>Save the workflow definition</li> <li>Validate the workflow</li> </ul> <p>The green banner indicates the workflow has been saved:</p> <p></p> <p>However, you can also see there are 2 errors found! and the workflow transitioned into the Invalid state:</p> <p></p> <p>What's the problem here? The Set Server to Server Profile task is used in the workflow but it has two mandatory inputs (Profile and Server) to which we have not assigned a value. This means the workflow cannot be executed, although saved successfully. Let's fix this and move forward with the workflow definition, let's assign a value to the Profile and Server inputs for the Set Server to Server Profile task.</p> <p>For the Profile input, click on Map. This time we are using a different type of mapping: Direct Mapping. As mentioned, we can make this value dynamic, so we are going to map this value to the Profile output of the New Server Profile from Template task. After all, we can't know the ID of the new profile in advance before it gets created!</p> <ul> <li>Input: Direct Mapping</li> <li>Map To: Task Output</li> <li>Task Name: New Server Profile From Template</li> </ul> <p></p> <p>As usual, click on the Map button in the bottom right corner to confirm the mapping.</p> <p>For the Server Input, we will again use Direct Mapping, however this time we will create a Workflow Input inline, as we want the user to specify what is the target server before the workflow gets executed.</p> <p>Click on the Map button, then select Direct Mapping, Workflow Input, Add Workflow Input as shown below:</p> <p></p> <p>A new form will open. You can notice all fields have been automatically filled with the right values based on the input type. Understanding all fields of this specific data type is out of scope for this lab. If you want you can have a look, when done click on the Add button</p> <p>Final result:</p> <ul> <li>Input: Direct Mapping</li> <li>Map To: Workflow Input</li> <li>Input Name: Server</li> </ul> <p>Click Map at the bottom right corner to confirm.</p> <p>You should now be moved to the canvas again. Let's have a look at the General tab of the workflow:</p> <p></p> <p>Under Workflow Input you can now see the new input we just created. You can also check the Preview section, which shows a preview of the user experience at workflow execution, where in this case they can only specify a Server before starting the workflow execution.</p> <p></p> <p>Let's Save again. All errors disappeared and the workflow transitioned to the Valid state. This means that we can execute it! ...but not just yet :)</p> <p></p> <p>Now that you are familiar on how to use tasks and map their inputs, let's speed things up.</p> <ul> <li>In Designer, drag the Deploy Server Profile task after the Set Server to Server Profile task</li> <li>Inputs:<ul> <li>Profile: Direct mapping to the Task Output: New Server Profile from Template task, Profile output<ul> <li>Input: Direct Mapping</li> <li>Map To: Task Output</li> <li>Task Name: New Server Profile From Template</li> <li>Output Name: Profile</li> </ul> </li> <li>Reboot Immediately to Activate: Static value and check the option. This will apply all changes before we move forward with the Operating System Install<ul> <li>Input: Static Value</li> <li>Reboot Immediately To Activate: Checked</li> </ul> </li> </ul> </li> </ul> <p></p> <ul> <li>In the Tools panel, click on Workflows and drag the Operating System Install task (nested workflow) after the Deploy Server Profile task</li> <li>Here are the Operating System Install task Inputs:<ul> <li>Server: Direct mapping to the Server workflow input<ul> <li>Input: Direct Mapping</li> <li>Map To: Workflow Input</li> <li>Input Name: Server</li> </ul> </li> <li>OS Install Inputs: create a new workflow input using Direct Mapping as you have done for the Server input on the Set Server to Server Profile task.<ul> <li>Input: Direct Mapping</li> <li>Map To: Workflow Input</li> <li>Click on \u201cAdd Workflow Input\u201d</li> </ul> </li> </ul> </li> </ul> <p></p> <ul> <li>Click Add</li> <li>Map it</li> <li>Save the workflow and it should be valid again</li> </ul> <p>Move back to the General tab of the workflow, you should now have something like this:</p> <p></p> <p>In theory, we can now execute the workflow, however if you have a look at the Preview section at the bottom section, there is a ton of inputs to fill in! Sometimes, we want to simplify workflow definition and spare our users to provide unnecessary inputs. In a real-world scenario, this depends on who is supposed to execute workflows: power users may want to specify all bits and bytes, while entry level engineers may not even have the necessary domain knowledge, so we only expose a limited set of inputs.</p> <p>For this lab, let's use a specific feature for Workflow Inputs: default values.</p> <p>Edit the OS Install Inputs workflow input by clicking on the pen icon behind it:</p> <p></p> <p>Check Set Default Value option:</p> <p></p> <p>Basically, here you can set some defaults for our target users. In this specific case, those inputs will not even be exposed. If you check the Allow User Override option as well, the default value will still be set but it will also be visible, and the user can override the value. In our case, we will leave the Allow User Override option unchecked.</p> <p>Let's set default values for the following sub-inputs, it works just like the Static Value input type mapping you already had the chance to work with:</p> <ul> <li>OS Image: ESXi 8.0u1a</li> <li>Vendor: VMware</li> <li>Installation Mode: Cisco</li> <li>Vendor: VMware</li> <li>NetworkDevice (the management interface which will receive the mgt IP address): vmnic0</li> <li>SCU Image: ucs-scu-6.3.2c.iso</li> </ul> <p>Click Save when done, then Save again in the top right corner to save and validate the workflow. In the Preview section, you can now see that we have much less inputs!</p> <p>Let's go ahead and execute the workflow.</p>"},{"location":"Automation/CreateANewWorkflow/","title":"Task 1: Create A New Workflow","text":"<p>From Intersight, under Automate click on Workflows, then Create Workflow. You will be brought to the General tab of the workflow designer, which is the first of four tabs.</p> <p></p> <p>Let's describe what those tabs are used for:</p> <ul> <li> <p>General: This is where you configure overall specs for your workflow, such as display name, tags, organization, description as well as inputs, outputs and variables</p> </li> <li> <p>Designer: This is the design canvas, where you can drag and drop tasks like \"Lego bricks\" to create a service blueprint, that is a workflow</p> </li> <li> <p>Mapping: Here you can view or edit the mappings among tasks and/or workflow inputs of outputs in a graphical way</p> </li> <li> <p>Code: From here, you can have a live code representation of the workflow you are creating. This is useful for troubleshooting purposes or for advanced topics, out of scope for this lab.</p> </li> </ul> <p>You should be in the General tab. As mentioned, this is where you can specify the specs of your workflow:</p> <ul> <li> <p>Display Name: Is a friendly name that can be changed at any time. </p> <ul> <li>Value: Assign an arbitrary name, preferably in the format \"workflow _\" <li> <p>Reference Name: Is the workflow name as seen by the system, this needs to be unique and can't be changed once set. It defaults to the Display Name but can only contain letters (a-z, A-Z), numbers (0-9), hyphen (-), period (.) or an underscore (_)</p> <ul> <li>Value: Keep the default value as it's rendered after you specified the Display Name</li> </ul> </li> <li> <p>Organization: Is the organization this workflow belongs to</p> <ul> <li>Value: Ensure you are using the organization \"X-Series-Configuration\"</li> </ul> </li> <li> <p>Under Workflow Execution you will find a switch called Failed/Terminated Actions. This allows the user to set whether to enable retry for workflow executions or enable automatic rollback in case of failure. This is especially useful when you want to rollback succeeded tasks in a failed workflow execution to get back to a clean state. Automatic Rollback can be enabled for workflow that failed, get cancelled or both</p> <ul> <li>Value: We don't need this for the lab, keep the switch OFF</li> </ul> </li> <li> <p>Enable Debug Logs: When true, workflow debug log info will be generated for each task. Enabling this flag will capture request and response details as debug logs in Intersight.</p> <ul> <li>Value: Check to switch it ON</li> </ul> </li> <li> <p>Workflow Inputs: Are data placeholders the users will populate when executing the workflow. For instance, this could be a server selection, a virtual machine name or any data you want your users to provide for a specific workflow execution</p> <ul> <li>Value: Ignore for now, we will create workflow inputs using another strategy, inline when doing mapping at the task level</li> </ul> </li> <li> <p>Workflow Variables: Are data placeholders that can be used by tasks to update information. These variables can be mapped to workflow outputs or reused as inputs by other tasks.</p> <ul> <li>Value: Ignore for now, we won't use workflow variables in this lab</li> </ul> </li> <li> <p>Workflow Outputs are data placeholders that will return outputs to the users after the execution. In case of nested workflows (workflows used as tasks in larger workflows) these can be used as inputs for other tasks or workflows</p> <ul> <li>Value: Ignore for now, we will create workflow outputs using another strategy, inline when doing mapping at the task level</li> </ul> </li>"},{"location":"Automation/ExecuteTheWorkflow/","title":"Task 3: Execute The Workflow","text":"<p>There are several ways to execute a workflow (please just READ, in this lab we are going to document only one of the following ways:</p> <ul> <li>From the Automate, Workflow Intersight section (Workflow Designer), clicking the context button, then Execute</li> <li>Within the workflow itself, using the Execute button</li> <li>Scheduling the workflow execution instead of executing right away. We support two types of workflow execution scheduling:</li> <li>One time. You can define execution time and date</li> <li>Recurring, using the Repeats option. Here you can set the first execution time as well as the start time cadence (Daily, Weekly, Monthly, etc.) and the end time condition (Never, on a specific day or after an arbitrary number of executions). You can also specify the minimum failure threshold, that is the number of failed executions the system can tolerate before suspending the schedule (manual intervention will be required)</li> </ul> <p>For this lab, we are going to execute the workflow from the Workflow Designer.</p> <p>If you are not already there, navigate to Automate, Workflows, My Workflows. Then click on the context button of your workflow and Execute the workflow as shown below:</p> <p></p> <p>These are the inputs we decided to expose to the users. Go ahead and fill the inputs with the following values. If not specified, leave it blank or keep the default:</p> <ul> <li>Organization: X-Series-Configuration</li> <li>Server: The server you have assigned. Please make sure you are not selecting someone else's server or it will compromise the rest of the lab for everyone. If you scroll to the right, the user label is visible. One note: as you select the server, also copy its name, it will be easier for the next input as you need to specify the server twice.</li> </ul> <p>Click Select</p> <ul> <li>This is how we coded the workflow and there is a way to expose this input only once. However, this will require more advanced capabilities like Go Templates which are out of scope for this lab</li> <li> <p>Server: This is the second time you specify the server, copy the server name you used before in the search, it will be easier to retrieve among all the others. This time the user label is not visible. Make sure both of the server names are the same and corresponding with the server name on your User Work Sheet.</p> </li> <li> <p>VLAN ID: Leave it empty as the traffic will be untagged</p> </li> <li>IP configuration Type: DHCP</li> <li>DHCP IP Version Type: IPv4</li> <li>Hostname: This is arbitrary. If possible use the SRVxx, where x is your POD number.</li> <li>Root: Although arbitrary as well, if possible use UCSX@Cisco123 which is the password for your account. This way in case of problems, proctors can easily help you</li> <li>Target Disk Type: Local Disk</li> </ul> <p>Click on Execute. The workflow will take approximately 55 minutes to complete.</p> <p>In the meanwhile, let's monitor its execution.</p> <p>If you are already on the history tab you can ignore this part. From the Workflow Designer, click on your workflow to edit it. You will notice the last tab, called History. Click it.</p> <p>On the left side, you will see your workflow tasks and progress tracking, so you know what is the current task being executed.</p> <p></p> <p>On the right side, you have a drop down which is set to the latest execution (the one you just triggered). If you had executed this workflow in the past, you will have the chance to \"go back in time\" and check inputs, outputs and outcomes of past workflow, like shown below:</p> <p></p> <p>Feel free to explore, Workflow Logs, Workflow Inputs and task specific Logs, Inputs and Outputs as the workflow gets executed. Eventually, when the workflow will finish with success, you will also have access to Workflow Outputs, which in this case we haven't set any.</p> <p>Although the workflow has just started, we can start checking its effects on the system as it runs. Click on the X button in the top-right corner to exit the workflow view.</p> <p>You will notice a spinning wheel with a number in the top-right corner, this is the number of running workflow in this moment. By clicking on it, you will see a different view which shows In Progress workflows. Click on your workflow (by default it will have the name of the workflow, unless you have changed it at execution time). From here, you can have more details on the workflow execution, including its execution time and other useful metadata. Feel free to explore, when done, exit this view by clicking the X button.</p> <p>Of course the operating system hasn't been installed yet, but more than likely we already have our profiles derived from the template and deployed to your server. Let's have a look.</p> <p>Navigate to Configure -&gt; Profiles -&gt; UCS Server Profiles as shown below:</p> <p></p> <p>From here, you can see that a new server profile has been already derived from the template and it's currently Validating.</p> <p>NOTE: It is possible, due to rare race conditions, that the OS install will fail as the server will try to mount the image before the server profile finishes activation. If this is your case, you will notice it after 7-8 minutes from the execution. A solution could be to have a Sleep Task (Under Tools, Tasks, CoreTasks) right before the Operating System Install task. You can set a value of 600 seconds (10 minutes) to ensure the Operating System Install tasks gets executed after the server profile has been activated:</p> <p></p> <p>If you are adding this step AFTER the workflow has failed, make sure to unassign the server profile to your server.</p> <p>Feel free to monitor the workflow as it runs or just have a break!  This is the expected outcome after approximately 50-55 minutes:</p> <p></p>"},{"location":"Automation/Introduction/","title":"Automation: Introduction","text":"<p>In this lab activity, you will leverage the server profile template you created to onboard new servers in an automated fashion.</p> <p>Cisco Intersight Automation, formerly known as Intersight Cloud Orchestrator, is a comprehensive solution designed to streamline and automate IT operations across various environments. This platform offers an integrated set of tools that allow IT teams to automate and manage infrastructure, applications, and workflows from a single, cloud-based interface. The goal of this lab section is to create an automation that addresses the following:</p> <ol> <li>Create a new server profile from a server profile template</li> <li>Map a server to this newly created server profile</li> <li>Deploy the server profile</li> <li>Install an Operating System (ESXi 8.0u1) in a unattended fashion</li> </ol>"},{"location":"Disclaimer/","title":"Disclaimer","text":"<p>This training document is to familiarize with Cisco Intersight and UCS X-Series nodes. Although the lab design and configuration examples could be used as a reference, it\u2019s not a real design, thus not all recommended features are used, or enabled optimally. For the design related questions please contact your representative at Cisco, or a Cisco partner.</p>"},{"location":"LabComponents/CommandPaletteUserLabel/","title":"Task 2: Command Palette / User Label","text":"<p>To navigate Intersight in an easy way, you can use the Command Palette. Press CTRL-K to open the Command Palette. It looks like the following figure.</p> <p></p> <p>Search for server.</p> <p>Click on Operate &gt; Servers</p> <p></p> <p>The server names can be confusing, and one solution is to work with User Labels. First find the server which is assigned to you, this is written on your User Detail Worksheet.  Click on the three dots next to your server.</p> <p>Select System -&gt; Set User Label</p> <p></p> <p>Set the User Label to SRVxx, which is the &lt;&gt; that you can find on your User Details Worksheet <p></p> <p>This will make it easier to find your server.</p> <p>At this moment, it is possible you don\u2019t see the user labels at the server overview. Click Settings next to server and select edit</p> <p></p> <p>Scroll down and select User Label and hit save.</p> <p></p> <p>Now you see the User Label and you can filter on it or move it to the first column.</p> <p></p>"},{"location":"LabComponents/ConnectToIntersight/","title":"Task 1: Connect To Intersight","text":"<p>You can connect with the laptop to Intersight and do all tasks in this lab. For this lab, every participant will have one physical server to configure.</p> <p>NOTE: DO NOT CHANGE THE CHASSIS or DOMAIN POLICIES. 7 Persons next to you won\u2019t be able to work on their lab.</p> <p>The lab gear consists of 4 clusters which exist of an FI pair, a UCSX-9508 chassis and 8x UCSX-210c-M6 nodes, all connecting to a top of rack switch. </p> <p>NOTE: Servers can have different CPUs, memory and Storage configuration. Even though these differences, every server has an M.2 drive to install the OS on and every task will work on any server.</p>"},{"location":"LabComponents/ConnectToIntersight/#connecting-to-the-lab-components","title":"Connecting to the Lab Components","text":"<p>In this lab activity, you will use the provided credentials to log into the Intersight account you\u2019ll be using for the lab.</p> <p>In the web browser, navigate to: Intersight. You will see the following screen:</p> <p></p> <p>On your \u201cUser Details Worksheet\u201d find your unique username which is designated as [[Username]] and use the email [[Username]]@intersighttme.com to login to Intersight.</p> <p>It is possible that you see the following message, this is normal as we are using unsigned certificates as part of the lab environment.</p> <p></p> <p>Click on Advanced.</p> <p></p> <p>Then click \u201cProceed to sts.intersighttme.com (unsafe)\u201d.</p> <p>On the \u201csts.intersighttme.com\u201d login screen, enter [[Username]]@intersighttme.com as the email address again and enter the [[Password]] from the User Details Worksheet.</p> <p>The following Table has the information about the login for Intersight.</p> <p>NOTE: DO NOT USE THIS FOR THE VPN. Use your User Details Worksheet.</p> <p></p> <p>If you see this error message below, please try to login again.</p> <p></p> <p>When logging into Intersight as a specific user, Intersight will return you to the last page you were viewing the last time you were logged in.</p> <p>Click on Dashboards on the left and then click on Servers at the top.</p> <p></p> <p>This is the start for everyone.</p>"},{"location":"Metrics/Explorer/","title":"Task 2: Explorer","text":"<p>Explorer is a new feature in Intersight. It will give you metrics about different devices and parameters.</p> <p>During the creation of this document, the whole environment wasn\u2019t up and running, and therefore, you don\u2019t see much traffic/values in the following screenshots.</p> <p>This Explorer feature will improve and more will be added.</p> <p>On the right side, select Explorer.</p> <p></p> <p>Note: Keep in mind, when you have the Advantage License Tier option, the data is collected every minute, but the granularity is still at 10 min.</p> <p></p> <p>For the first metrics, we are selecting: Host Power and Status -&gt; Host Power -&gt; Maximum</p> <p></p> <p></p> <p>Click on \u201cGroup By\u201d and select Host Name</p> <p>Select a time interval of Last Month to see nicer graphs.</p> <p>Here is the current result:</p> <p></p> <p>The limit is already set to 5.</p> <p>If you want to see the 8 FI set the limit to 8.</p> <p></p> <p>And here is the result where you see the 8 FI\u2019s.</p> <p></p> <p>Disable this metric (Slide next to \u201cHost Power \u2013 Maximum\u201d and Add Metric for a new metric.</p> <p></p> <p>Select:</p> <ul> <li>Metrics: Network Interface -&gt; Operational Link Speed -&gt; Maximum</li> <li>Filter By: Host Type equals Fabric Interconnect</li> <li>Group By: Host Name</li> <li>Limit: 5</li> </ul> <p></p> <p>The result you see are in Bps (Bytes per Second.)</p> <p>This is for every network related metric. Keep this in mind that it is NOT bps (bits per second.)</p> <p>In this case the Max link is 25 GBps or 200 Gbps.</p> <p></p> <p>To find the power usage of one chassis, you need to know the chassis identifier.</p> <p></p> <p>One easy way to get this, is to go to the Chassis you want to know the details and select metrics.</p> <p>On the left, go to Operate -&gt; Chassis / Select RTP91-FI6454-04-1 (Chassis name) / Click Metrics. (On the top)</p> <p>Look for the Power with PSU1 as Endpoint.</p> <p>Expand it and click on View in Explorer</p> <p></p> <p></p> <p>Click on Filter By and you will see:</p> <p></p> <p>The right Identifier is now chosen, but there is only one PSU and we want to have all PSUs to see the power consumption of the chassis.</p> <p>Remove the Name = PSU1 and type in that field Name. Then select name and select contains.</p> <p></p> <p>Instead of choosing a PSU from the list, type PSU and hit enter.</p> <p></p> <p>Now you see the power consumption of the total chassis. If you select a time interval of one week, you can see that we had issues in the lab.</p> <p></p> <p></p>"},{"location":"Metrics/Introduction/","title":"Metrics: Introduction","text":"<p>Metrics give you an idea of your environment and gives you data, which you can use for decisions.</p> <p>In this section we will go over the Server Metrics and Explorer. There are other metrics available in Intersight and you can explorer those on your own. Fabric Interconnect, Chassis do have different metrics which can be viewed when you click on them or in Explorer.</p>"},{"location":"Metrics/ServerMetrics/","title":"Task 1: Server Metrics","text":"<p>Each Compute device has certain metrics. </p> <p>Let\u2019s go back to Servers and select your server.</p> <p>On the bar, you see Metrics. Click it.</p> <p>Here you see the Host Power and Temperature of the server.</p> <p></p> <p>Click on the icon next to the mini graphic of Host Power</p> <p></p> <p>An exploded view is now visible. Change the setting to last month.</p> <p></p> <p>The granularity for a Time Interval of \u201cLast Month\u201d can have the following values:</p> <p></p> <p>When the Time Interval is set to \u201cLast 1 Hour\u201d, 1min and 10 min Granularity is possible.</p> <p>The 1 min needs an IMM Advantage license.</p>"},{"location":"NetworkDiagram/","title":"Network Diagram","text":"<p>Because Intersight is a SaaS platform, there is no need to use VPN to the physical hardware, which is in RTP, North Carolina.</p> <p>Here is a very simplistic overview of the Network Diagram:</p> <p></p>"},{"location":"RelatedSessionsAtCiscoLive/","title":"Related Sessions At Cisco Live","text":"<p>Thank you for participating in the UCS X-Series Guide for Success instructor-led lab!</p> <p>We appreciate your time, and hope you enjoy the rest of Cisco Live - San Diego!</p> <p>You can search The Cisco Live San Diego session catalog with specific keywords and find sessions that are relevant to your lab to continue your learning.</p> <p>2025 Cisco Live San Diego Session Catalog</p>"},{"location":"Repository/","title":"Repository","text":"<p>In this lab activity, we\u2019ll learn about using Cisco Intersight to perform operating system (OS) installations, including some of the options when performing operating system installs and some of the best practices.</p> <p>Before we dive into performing an OS installation, allow us to provide a bit of information on how OS installation works with Intersight.</p> <p>OS installation takes place using UCS vMedia feature and is completely automated by Intersight. There are two images that are required to perform the operation\u2026</p> <p>OS image: This is the OS image (ISO file) that you are intending to install</p> <p>Server Configuration Utility (SCU): This is a utility provided by Cisco that enables automated unattended OS installation (i.e. OS customization using a configuration file such as a kickstart file during installation)</p> <p>Both images above should be hosted on an image repository (shared via CIFS, NFS or HTTPS) which the target servers being imaged can access over the network. We\u2019ll see this image repository in just a bit as we perform an OS installation.</p> <p>There are three main modes (or options) for OS install depending on your requirements. Selecting a mode tells Intersight where to get the configuration file that will be used to create a unique configuration on the server, such as a kickstart file for Linux-based operating systems. Here is a bit more information on each mode:</p> <p>Cisco Mode: Simplest approach for getting started with OS installation and Intersight. For supported operating systems Intersight provides an out of the box validated template to use for the configuration file. This is the quickest way to get an OS up and running, however you cannot edit the provided configuration files.</p> <p>Custom Mode: This mode is similar to the Cisco mode, however it allows the user to upload a customized configuration file to use for unattended OS configuration during install. You can add your own variables and configuration parameters to further customize the OS to your requirements. You will use this mode during your OS installation operation.</p> <p>Embedded Mode: This mode assumes the file or files necessary for OS configuration are embedded within the ISO image, therefore there is no external configuration file required.</p> <p>As mentioned above, we need to make sure we have both the OS image and the SCU image available on a repository (shared via CIFS, NFS or HTTPS) and we need to make sure Intersight is aware of this repository.</p> <p>In Intersight, Click on System -&gt; Software Repository</p> <p></p> <p>The \u201cSoftware Repository\u201d page is where we can tell Intersight where to find various types of images and files such as firmware, OS, SCU and configuration files. In the case of OS installation, we\u2019ll look at both the OS images and the SCU images.</p> <p>Click on the \u201cOS Image Links\u201d tab.</p> <p></p> <p>On the \u201cOS Image Links\u201d tab, we can see that we already have an OS image configured which we\u2019ll use for the OS installation. However, for practice we will add the same OS image again so you get familiar with the steps.</p> <p>Click on Add OS Image Link</p> <p></p> <p>Select the X-Series-Configuration Organization Select the HTTP/S option Enter this File Location: https://172.20.70.90/images/VMware-ESXi-8.0.U1a-21813344-Custom-Cisco-4.3.1-a.iso </p> <p></p> <p>Click Next Enter the following details</p> <p>Name: SRVxx-ESXi-8.0 Vendor: VMware Version: ESXi 8.0 u1 </p> <p></p> <p>And click Add</p> <p>Simply observe the information provided for the OS image, it\u2019s simply which protocol is the image shared over (CIFS, NFS or HTTPS) and the location of the image on the fileshare on the network. Please DO NOT EDIT this OS image as this will be used for all attendees in the lab.</p> <p>Now we\u2019ll observe the SCU image as well. Click on \u201cSoftware Repository\u201d in the left-hand menu.</p> <p>Now click on the \u201cSCU Links\u201d tab.</p> <p></p> <p></p> <p>You can see there already is a link to an SCU image and that is what you will use in the next steps. However, we will create a new link so you can learn important aspects when creating the link.</p> <p>Click on Add SCU Link</p> <p>Select the X-Series-Configuration Organization Select the HTTP/S option Enter this File Location: https://172.20.70.90/images/ucs-scu-6.3.2c.iso </p> <p></p> <p>Click Next</p> <p>Name: SRVxx-SCU-6.3.2c Version: 6.3.2c (this is mandatory but not used yet, so what you enter doesn\u2019t matter) Supported Models: All (this is mandatory but not used yet, so what you enter doesn\u2019t matter)  </p> <p></p> <p>Click Add</p>"},{"location":"Scenario/","title":"Scenario","text":"<p>As an administrator you want to roll out an Operating System on different hosts.  To save time you don\u2019t want to create server profiles and install an OS manually. Working with Server Profile Templates and Automation, your life will be easier.</p> <p>In this lab activity, you will learn how to work with Templates and clones.  After the creation of the Server Profiles, you will create an automated workflow to install an OS on the server.</p> <p>The flow of this lab will be:</p> <ul> <li>Day-0: Server Configuration</li> <li>Day-1: Deploying OS</li> <li>Day-2: Metrics and Troubleshooting</li> </ul>"},{"location":"ServerInventory/","title":"Server Inventory","text":"<p>Before we dive into the server inventory, please go to Servers and click on your assigned server. In this example we are going to look at SRV-2 or RTP91-FI6454-01-1-2</p> <p></p> <p>Click on your assigned server to view the inventory.</p> <p>At the General Tab, you will information about the server, like the serial number, number of CPUs with the Cores, Memory, PID, Firmware version, Alarms and much more.</p> <p></p> <p>It is always nice to look at the inside of the server.  Virtually that is possible when clicking the TOP view.</p> <p></p> <p>Click on Tab Inventory and expand all.</p> <p>Walk through every option and verify if the server has a M.2 Controller. This is a must for another task. Also make note if the server has NVMe Drives (Controller NVME-Direct-U.2 Drives)</p> <p></p> <p>If you go to the UCS Server Profile (Top Bar), and the server profile is attached to the server, you see the policies that are active for this server.</p> <p>When you are doing this part, while the Execution of the workflow isn\u2019t finished yet, you will see the status Validating and maybe a \u201cActivate Requires Reboot\u201d after the policy. This is normal behaviour.</p> <p></p> <p>Look at which IP address the Management IP of the server did get:</p> <p></p> <p>And here is a view of the vNICs/vHBAs that are configured for the profile. ** If you have vHBA, here you can find the WWPN ID\u2019s for the SAN.</p> <p>Here is an example of the HCL Validation. It is possible your view is different, because this server was configured a bit differently and has an OS installed with incompatible drivers.</p> <p></p> <p>The Topology view shows the connections between the FI, IFM and the node with vNICs (If configured).</p> <p></p> <p>Currently, we are skipping the Metrics part.  There is a Task which walk-through the different Metrics in Intersight.</p> <p>The connectivity Tab shows information about the node, vNIC, Adapter, Virtual Group, etc.</p> <p></p>"},{"location":"TemplatesAndCloning/ChangeTheUCSServerProfileTemplate/","title":"Task 3: Change the UCS Server Profile Template","text":"<p>As we already mentioned, Pools cannot be cloned. During the cloning of a Server Template Profile a new pool will be created, but without any UUID, MAC, IP, Etc in it.</p> <p>First, let\u2019s go to Templates (Left) and select the vNIC Templates Tab.</p> <p></p> <p>You have two vNIC templates created.</p> <p>If there is a vNic template which is not in use, we need to fix the link to the vNic Template. You can identify which vNic needs to be fix by looking at the usage column.</p> <p>If both of your vNIC-Template profile has a usage of 1, still follow the steps, just to understand the steps in case you need it in the real world.</p> <p></p> <p>Go to Policies and find the LAN-SRVxx policy -&gt; Click on edit -&gt; Next. Find the vNic which is not linked and click on the 3 dots behind it and link it to the correct vNic Template</p> <p>Do not click on \u201cDetach from Template\u201d.</p> <p></p> <p>Follow the steps on the screenshot below:</p> <p></p> <p>Then click Update and Save</p> <p>Now that we\u2019ve fixed the link to the vNic template we can continue with the next steps.</p> <p>Go to the vNic Template page. Click the three dots on the right next to one of your vNIC-Template and select Edit. It is better to start with vNIC-Template A.</p> <p>Click Next</p> <p>Click on the Bin of the Selected Pool.</p> <p></p> <p>Select Pool and select MAC-Pool of the Shared Pool with Org UCSX-LAB-RESOURCES</p> <p></p> <p></p> <p>Click Save</p> <p>Repeat these steps also for the vNIC-Template-B-SRVxx, where X is your POD number.</p> <p>Go to the Templates tab on the left.</p> <p>Select the UCS Server Profile Templates Tab.</p> <p>The Server Profile Template was cloned and thing should first be corrected, before we can derive the Server Template Profile.</p> <p>Click on Edit next to your cloned Server Profile Template.</p> <p></p> <p>Click Next.</p> <p>Click the Bin icon next to the Selected UUID Pool.</p> <p></p> <p>Click Select Pool and select UUID-Pool from the Shared Pool with Organization UCSX-LAB-RESOURCES.</p> <p></p> <p>Click Next</p> <p>Click the Edit Pencil of IMC Access</p> <p></p> <p>Click Next</p> <p>Click on the Bin icon next to the Selected IP Pool.</p> <p></p> <p>Click on Select IP Pool and select UCSXKVMPool from the Shared Pools with Organization UCSX-LAB-RESOURCES</p> <p></p> <p>This is the result:</p> <p></p> <p>Click Save</p> <p>Click Next and click again Next. Click Next.</p> <p>You are now at the Summary of the Server Profile Template.</p> <p></p> <p>Click Close.</p>"},{"location":"TemplatesAndCloning/Cloning/","title":"Task 1: Cloning","text":"<p>Let\u2019s start with creating a clone of the LAB-RESOURCE UCS Server Profile Template. Go to Configure -&gt; Templates on the left and select the UCS Server Profile Templates at the top. Click Three dots on the right of LAB-Resources and select Clone.</p> <p></p> <p>The destination Organization is X-Series-Configuration Select \u201cCreate new clones for all policies and pools inside of the destination organization.\u201d</p> <p></p> <p>Click Next</p> <p>Suffix Name for Cloned Policies and Pools should be -SRVxx, where x is your pod number.</p> <p>The clone name can be SRVxx-ServerProfileTemplate, where x is your pod number. Set Tags to SRV:SRVxx, where x is your pod number.</p> <p></p> <p>Click Clone</p> <p>The process of creating the clone is about 10 seconds. Now you see the new UCS Server Profile Template that you can work with.</p> <p></p>"},{"location":"TemplatesAndCloning/CreateUCSServerProfileFromTemplate/","title":"Task 4: Create UCS Server Profile from Template","text":"<p>Select the three dots on the right of you newly create UCS Server Profile Template and select Derive.</p> <p></p> <p>Do not assign it to a server and select Assign Later.</p> <p></p> <p>The Number of Profiles to derive should be \u201c1\u201d and click Next.</p> <p>Rename it to: SRVxx-ServerProfile, where x is your POD number and the Organization is X-Series-Configuration.</p> <p></p> <p>Click Next.</p> <p>You see now the summary.</p> <p></p> <p>Click on Derive</p> <p>Go to Profiles (Left) and select UCS Server Profiles.</p> <p>Look at the newly create UCS Server Profile.</p> <p></p> <p>You will see SRVxx-ServerProfile at the Profiles / UCS Server Profiles.</p> <p>NOTE:</p> <p>We won\u2019t assign the Server Profile because we will use Intersight Automation to do that!</p>"},{"location":"TemplatesAndCloning/Introduction/","title":"Templates and Cloning: Introduction","text":"<p>Each server does need a server profile. Instead of making a lot of the same server profile, you create a server template and derive this template multiple times. In a server profile template, vNIC and vHBA templates can be used.</p> <p>Besides server profile templates, chassis and UCS domain templates are possible. These will not be handled in this lab.</p> <p>Another way to have the same server profile, is to clone it. This has advantages and disadvantages. It is not the best practice to use clones, but because this is a lab, we want to show you what the limitations are.</p> <p>One of the limitations is: Pools cannot be cloned. They will be created as new pools without any values in them. Policies, Templates and Server Profiles can be cloned.</p> <p>First you are going to clone a server profile template and then make changes.  Once it is a server profile template that you can use, you are going to derive this template.</p> <p>NOTE:</p> <p>Do NOT delete DO_NOT_USE Template Profile.</p> <p>Do NOT delete or any server policy or vNIC policy without your -SRVxx at the end, where x is your pod number.</p>"},{"location":"TemplatesAndCloning/VerifyTheNewlyCreatedClone/","title":"Task 2: Verify the newly created clone","text":"<p>Select the three dots on the right and select Edit.</p> <p></p> <p>The view when Edit is clicked.</p> <p></p> <p>Just verify that the Organization is X-Series-Configuration. Click Next.</p> <p>Verify if the policies that you see has the extension of -SRVxx, where x is your pod number.</p> <p></p> <p>Click Close</p>"},{"location":"TimeForABreak/","title":"Time For A Break","text":"<p>Please relax and take a 30 minute break.</p> <p></p>"},{"location":"Troubleshooting/BladeRediscovery/","title":"Task 3: Blade Rediscovery","text":"<p>Your server is in a good state and fully discovered in Intersight. Unfortunately \u2013 or luckily \u2013 we did not find a way to remove parts of the inventory so we can\u2019t simulate an incorrectly discovered server but we will go through some of the step to rediscover your server. This is a non-disruptive operation and safe to try first.</p> <p>Go to your server and then click on Actions -&gt; System -&gt; Rediscover</p> <p></p> <p>This will initiate a Blade Discovery and this is the first step to fixing your server. Monitoring the ping and the Discovery workflow to see if you observe any disruptions \u2013 there should be none.</p> <p>The discovery will take about 4 minutes, monitoring the workflow to see which steps are taking to understand the impact this workflow might have.</p>"},{"location":"Troubleshooting/ConnectToVPN/","title":"Task 1: Connect To VPN","text":"<p>This is only required for some tasks, but you might as well set it up now so it\u2019s there when you need it. First open the Cisco Secure Client and connect to [[VPN IP]].</p> <p></p> <p>When you try to connect you could be presented with this screen:</p> <p></p> <p>That means you will need to stop blocking untrusted servers. Please click on \u201cChange Settings\u201d</p> <p></p> <p>The disable the \u201cBlock connections to untrusted servers\u201d and try to connect again.</p> <p>Now you will see a warning that our VPN server has an Untrusted Server Certificate, please click on \u201cConnect Anyway\u201d.</p> <p></p> <p>Choose the \u201cWorkshop\u201d group and enter your credentials which are the [[Username]] and [[VPN Password]] values from the User Details Worksheet.</p> <p>IMPORTANT: The username is without @intersighttme.com, enter your username like we did below:</p> <p></p> <p>You should see this message, don\u2019t forget to click Accept and now you have access to the VPN.</p> <p></p>"},{"location":"Troubleshooting/DecommissionAndRecommission/","title":"Task 4: Decommission and Recommission","text":"<p>Sometimes your server still hasn\u2019t discovered correctly, and you might want to do a more thoroughly rediscover. The way how to do that is by decommissioning and recommissioning your server.</p> <p>Go to your server page and click Action -&gt; System -&gt; Decommission</p> <p></p> <p>Attention! This is a disruptive operation! Read the pop-up message and click on Decommission. You will see that the server is immediately not pingable anymore.  The decommission will start with an Undeploy Server Profile Workflow which will clear all the server identifiers like the MGMT ip, MAC address, UUID and turn the server off.</p> <p></p> <p>After the undeploy workflow you will see the Blade Decommission workflow. This will reset the server back to factory defaults and completely remove the device registration in Intersight. That is why sometimes this is also referred to as a Deep Rediscovery</p> <p></p> <p>Now if you which to Recommission the server you need to navigate to Fabric Interconnect -&gt; [[IMM-Domain-Name]] FI-A or B doesn\u2019t matter -&gt; Connections -&gt; Decommissioned Servers. Find your [[ServerName]] in the list and click the three dots behind it and choose Recommission</p> <p></p> <p>Accept the pop-up and you will see that the server is removed from the list of Decommissioned servers but is not yet in the Server list.</p> <p>This will take about a minute or so and then a Blade Discovery will start. This Blade discovery will take longer as the server needs to boot. This might be a good time to get a fresh cup of coffee as it will take about 10 minutes. When the Blade Discovery is finished you will see that a Server Profile has already assigned itself to your server. You can find the Server Profile by going to:</p> <p>Server -&gt; [[ServerName]] -&gt; UCS Server Profile -&gt; Click on the Name of your Server Profile.</p> <p>All you got to do now is deploy that Server Profile again by clicking on Action -&gt; Deploy</p> <p></p> <p>Select \u201cReboot Immediately to Activate\u201d and click on Deploy</p> <p></p> <p>The Deploy Worfklow will take about 7 minutes. When it\u2019s finished the server will need to boot so enjoy another 10 minute break and feel free to talk to us while you wait.</p>"},{"location":"Troubleshooting/GetTheOSIPAndStartAPing/","title":"Task 2: Get The OS IP And Start A Ping","text":"<p>Launch the Tunneled vKVM by navigating to your Servers -&gt; Actions -&gt; Launch Tunneled vKVM</p> <p>If you still have the tab open you can skip this step.</p> <p></p> <p>When you are on the vKVM page you will see the IP address that is automatically assigned to your ESXi host through DHCP</p> <p></p> <p>Open a terminal on your workstation and ping the IP address</p> <p></p> <p>Keep this ping running during all tasks in this scenario.</p>"},{"location":"Troubleshooting/Introduction/","title":"Troubleshooting: Introduction","text":"<p>When you server is not showing up correctly in Intersight you might want to try some steps to correct the issue.</p> <p>This could be failures during discovery, incomplete inventory or an alarm on your server that you might want to clear. Keep in mind most of these operations are disruptive procedures which you can\u2019t do in your production environment, but this lab is perfect for it. You will also test vNic failover by disabling and enabling your vNic\u2019s.</p>"},{"location":"Troubleshooting/PowerCycleChassisSlot/","title":"Task 5: Power Cycle Chassis Slot","text":"<p>This operation can save you a trip to the datacenter when your server is not showing up in the chassis or when the server is non-responding to any operations.</p> <p>Instead of reseating the server in the slot you can try to power cycle the chassis slot and see if this helps.</p> <p>NOTE: ! Before you do this step make sure that all workflows for your server are finished !</p> <p>In order to reset the chassis slot you must go to  Chassis -&gt; [[Chassis Name Of Your Domain]] -&gt; Click on the Chassis in the details section -&gt; Actions -&gt; Power Cycle Chassis slot</p> <p></p> <p>Select the right slot for your server, which is the last digit of your [[ServerName]].</p> <p>ATTENTION! This is a disruptive operation, your server will reboot.</p> <p></p> <p>When you hit Power Cycle the server will power off.</p> <p>After the Chassis Slot power cycle is complete make sure to power your server on again by going to Server -&gt; [[ServerName]] -&gt; Actions -&gt; Power -&gt; Power On</p>"},{"location":"Troubleshooting/RebootManagementController/","title":"Task 6: Reboot Management Controller","text":"<p>Another common troubleshooting step is to reset the management controller of your server. This may be needed when you server is showing certain errors that seem non persistent. The reboot of the management controller is non disruptive.</p> <p>Before you do this step make sure that all workflows for your server are finished.</p> <p>To reboot your management controller go to Servers -&gt; your Server -&gt; Actions -&gt; System-&gt; Reboot management controller</p> <p></p> <p>This will kick off a workflow and a subsequent Blade Discovery workflow. You can monitor the ping the see that there is no impact to your Operating System.</p>"},{"location":"Troubleshooting/TestingVNICFailover/","title":"Task 7: Testing VNIC Failover","text":"<p>Go to Servers -&gt; [[ServerName]] -&gt; Inventory -&gt; Network Adapters -&gt;  UCSX-V4-Q25GML -&gt;  Interfaces -&gt; Click on the three dots behind mgmt - &gt; Disable (Active)</p> <p></p> <p>Now look at the ping and see that you might have lost just 1 ping</p> <p></p> <p>Go to the Connectivity tab and you will see that 1 uplink of the vNic is down, this might take some time, make sure to refresh the page after 1 minute.</p> <p></p> <p>Go back to your vNic and enable it again</p> <p></p> <p>Using the vNic Enable / Disable methods and the Connectivity tab allows you to force certain traffic to go over a specific FI, which can help in troubleshooting networking issue.</p>"}]}